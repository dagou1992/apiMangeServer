(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c83ae5e"],{"3c39":function(e,t,a){"use strict";var n=a("6234"),i=a.n(n);i.a},6234:function(e,t,a){},fbcc:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("env-components")},i=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"}},[a("el-card",{staticStyle:{"padding-bottom":"15px","margin-bottom":"20px"}},[a("h3",[e._v("环境配置")]),a("p",[e._v("项目环境可以帮助您快速切换测试的 API 地址前缀、全局变量等信息")]),a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.handleToCreate}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 新建环境 ")])],1),a("base-table",{attrs:{loading:e.loading,"table-list":e.tableList,operations:e.operations,"table-data":e.tableData}}),a("el-dialog",{attrs:{title:e.isEdit?"编辑环境":"新建环境",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{model:e.formData,"label-width":"80px"}},[e._l(e.formList,(function(t){return a("el-form-item",{key:t.label,attrs:{label:t.label}},[a("el-input",{model:{value:e.formData[t.value],callback:function(a){e.$set(e.formData,t.value,a)},expression:"formData[item.value]"}})],1)})),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmitEnv}},[e._v(" 提交 ")]),a("el-button",[e._v("取消")])],1)],2)],1)],1)},o=[],r=(a("45fc"),a("b0c0"),a("07ac"),a("498a"),a("96cf"),a("1da1")),s=a("8116"),c=function(e){return Object(s["b"])("/api/envPage",e)},u=function(e){return Object(s["d"])("/api/envPage",e)},b=function(e){return Object(s["e"])("/api/envPage",e)},d=function(e){return Object(s["a"])("/api/envPage/".concat(e))},m=a("cc8f"),f=a("962c"),h={name:"index",data:function(){var e=this;return{tableData:[],tableList:[{label:"ID：",value:"id",width:100},{label:"名称：",value:"name"},{label:"备注：",value:"remark",width:240},{label:"前置URL：",value:"host"}],operations:[{label:"编辑",onClick:function(t){return e.handleToEdit(t)}},{label:"删除",onClick:function(t){var a=t.id;return e.$store.dispatch("globalDialog/toggleDialogVisible",{message:'<span style="color: red;">确定要删除吗？</span>',visible:!0,onSubmit:function(){return e.handleToDeleteData(a)}})}}],formList:[{label:"环境名称",value:"name"},{label:"环境备注",value:"remark"},{label:"Host",value:"host"}],formData:{name:"",remark:"",host:""},dialogVisible:!1,loading:!1,isEdit:!1}},components:{BaseTable:f["a"]},mounted:function(){this.initPage()},mixins:[m["a"]],methods:{handleChangeDialogVisible:function(e){this.dialogVisible=e},handleSubmitEnv:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.formData,!Object.values(a).some((function(e){return"string"===typeof e&&""===e.trim()}))){t.next=4;break}return e.messageWarning("信息填写不完整"),t.abrupt("return");case 4:if(!e.isEdit){t.next=10;break}return t.next=7,b(a);case 7:n=t.sent,t.next=13;break;case 10:return t.next=12,u(a);case 12:n=t.sent;case 13:n&&(e.handleChangeDialogVisible(!1),e.initPage());case 14:case"end":return t.stop()}}),t)})))()},handleToCreate:function(){this.isEdit=!1,this.formData={name:"",remark:"",host:""},this.handleChangeDialogVisible(!0)},handleToEdit:function(e){var t=e.id,a=e.name,n=e.remark,i=e.host;this.handleChangeDialogVisible(!0),this.isEdit=!0,this.formData={id:t,name:a,remark:n,host:i}},handleToDeleteData:function(e){var t=this;d(e).then((function(){t.messageSuccess("删除成功"),t.closeGlobalDialog(),t.initPage()}))},initPage:function(){var e=this;this.loading=!0,c().then((function(t){e.tableData=t,e.loading=!1}))}}},g=h,v=(a("3c39"),a("2877")),p=Object(v["a"])(g,l,o,!1,null,"e7bc9346",null),D=p.exports,k={name:"Env",components:{EnvComponents:D}},x=k,w=Object(v["a"])(x,n,i,!1,null,"f88cf7be",null);t["default"]=w.exports}}]);
//# sourceMappingURL=chunk-1c83ae5e.155b16d9.js.map