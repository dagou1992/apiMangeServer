(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c5af12e"],{"23ba":function(e,a,t){"use strict";t.d(a,"c",(function(){return r})),t.d(a,"a",(function(){return s})),t.d(a,"d",(function(){return i})),t.d(a,"b",(function(){return o}));var n=t("8116"),r=function(e){return Object(n["b"])("/api/apiPage/group",e)},s=function(e){return Object(n["d"])("/api/apiPage/group",e)},i=function(e){return Object(n["e"])("/api/apiPage/group/",e)},o=function(e){return Object(n["a"])("/api/apiPage/group/".concat(e))}},"3ba5":function(e,a,t){},"4ec3":function(e,a,t){"use strict";t.d(a,"c",(function(){return r})),t.d(a,"a",(function(){return s})),t.d(a,"d",(function(){return i})),t.d(a,"b",(function(){return o}));t("99af");var n=t("8116"),r=function(e){return Object(n["b"])("/api/apiPage",e)},s=function(e){return Object(n["d"])("/api/apiPage",e)},i=function(e){return Object(n["e"])("/api/apiPage/",e)},o=function(e){return Object(n["a"])("/api/apiPage/".concat(e.group,"/").concat(e.id))}},"552e":function(e,a,t){"use strict";var n=t("8845"),r=t.n(n);r.a},"7c68":function(e,a,t){"use strict";var n=t("3ba5"),r=t.n(n);r.a},8845:function(e,a,t){},a705:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"api-edit"},[t("el-header",{staticStyle:{"font-size":"12px",height:"40px"}},[t("el-page-header",{on:{back:e.goBack}}),t("el-button",{staticStyle:{position:"absolute",top:"13px",left:"128px"},attrs:{type:"success",size:"small"},on:{click:e.saveData}},[t("i",{staticClass:"el-icon-save"}),e._v(" 保存 ")])],1),t("el-main",[t("p",{staticClass:"title"},[e._v("基本信息")]),t("base-data-form",{ref:"base_data_form"}),t("p",{staticClass:"title"},[e._v("请求参数")]),t("request-param",{ref:"request_param"}),t("p",{staticClass:"title"},[e._v("返回参数")]),t("response-param",{ref:"response_param"}),t("p",{staticClass:"title"},[e._v("返回示例")]),t("response-example",{ref:"response_example"})],1)],1)},r=[],s=(t("b0c0"),t("a9e3"),t("498a"),t("5530")),i=t("3835"),o=t("4ec3"),c=t("cc8f"),l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"base_data_form"},[t("el-form",{attrs:{"label-position":"top","label-width":"80px",model:e.baseDataForm}},[t("el-form-item",{attrs:{label:"API Path"}},[t("el-input",{attrs:{placeholder:"请输入Path",size:"small"},model:{value:e.baseDataForm.path,callback:function(a){e.$set(e.baseDataForm,"path",a)},expression:"baseDataForm.path"}},[t("el-select",{staticStyle:{width:"130px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.baseDataForm.type,callback:function(a){e.$set(e.baseDataForm,"type",a)},expression:"baseDataForm.type"}},e._l(e.requestTypeList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),t("el-form-item",{attrs:{label:"API 名称"}},[t("el-input",{attrs:{placeholder:"请输入名称",size:"small"},model:{value:e.baseDataForm.name,callback:function(a){e.$set(e.baseDataForm,"name",a)},expression:"baseDataForm.name"}},[t("el-select",{staticStyle:{width:"250px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.baseDataForm.group,callback:function(a){e.$set(e.baseDataForm,"group",a)},expression:"baseDataForm.group"}},e._l(e.groupList,(function(e){var a=e.name,n=e.id;return t("el-option",{key:n,attrs:{label:a,value:n}})})),1)],1)],1)],1)],1)},u=[],p=(t("b64b"),t("23ba")),m=t("267e"),d={name:"BaseDataForm",data:function(){return{baseDataForm:{path:"",name:"",type:"GET",group:""},groupList:[]}},computed:{requestTypeList:function(){return Object.keys(m["b"])}},methods:{handleChangeBaseDataForm:function(e){this.baseDataForm=e},initPage:function(){var e=this;Object(p["c"])().then((function(a){e.groupList=a}))}},mounted:function(){this.initPage()}},f=d,h=(t("552e"),t("2877")),b=Object(h["a"])(f,l,u,!1,null,"464f4fc8",null),g=b.exports,y=t("45df"),v=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticStyle:{"font-size":"14px",margin:"8px"}},[e._v(" JSON根类型： "),t("el-select",{staticStyle:{width:"130px","margin-bottom":"8px"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.currentJsonType,callback:function(a){e.currentJsonType=a},expression:"currentJsonType"}},e._l(e.JsonType,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1),t("common-table",{attrs:{"data-source":e.data,hasChildren:!0}})],1)},D=[],_=t("8b30"),x={name:"ResponseParam",components:{CommonTable:_["a"]},data:function(){return{baseData:{name:"",value:"",isRequired:!0,remark:"",isRoot:!0},data:[],JsonType:["Object","Array"],currentJsonType:"Object"}},created:function(){this.data=[JSON.parse(JSON.stringify(this.baseData))]},methods:{handleChangeData:function(e){this.data=e},handleChangeCurrentJsonType:function(e){this.currentJsonType=e}}},O=x,P=Object(h["a"])(O,v,D,!1,null,"65c699e2",null),C=P.exports,j=t("7c35"),F={name:"ApiEdit",components:{BaseDataForm:g,RequestParam:y["a"],ResponseParam:C,ResponseExample:j["a"]},data:function(){return{isEdit:!1,loading:!1}},mounted:function(){var e=this.$route.query.id;e&&(this.isEdit=!0,this.initPage(e))},mixins:[c["a"]],methods:{goBack:function(){this.$router.go(-1)},saveData:function(){var e=this,a=this.$refs,t=a.base_data_form,n=a.request_param,r=a.response_param,c=a.response_example,l=t.baseDataForm,u=l.path,p=l.name,m=l.group,d=l.type,f=Object(i["a"])(n.tabList,4),h=f[0],b=f[1],g=f[2],y=f[3];if(""!==u.trim())if(""!==p.trim())if(""!==m){var v="form-data"===b.model||"x-www-form-urlencoded"===b.model?{data:this.filterEmptyData(b.data)}:{content:b.content},D={path:u,name:p,group:Number(m),type:d,requestParam:{header:this.filterEmptyData(h.data),body:Object(s["a"])({model:b.model},v),query:this.filterEmptyData(g.data),rest:this.filterEmptyData(y.data)},responseParam:{data:this.filterEmptyData(r.data),type:r.currentJsonType},responseExample:c.content};if(this.isEdit){var _=this.$route.query.id;Object(o["d"])(Object(s["a"])(Object(s["a"])({},D),{},{id:_})).then((function(){e.messageSuccess("修改成功"),e.$router.push({name:"ApiDetailPage",query:{id:_}})}))}else Object(o["a"])(D).then((function(a){e.messageSuccess("创建成功"),e.$router.push({name:"ApiDetailPage",query:{id:a.id}})}))}else this.messageWarning("group是必填项");else this.messageWarning("name是必填项");else this.messageWarning("path是必填项")},initPage:function(e){var a=this;this.loading=!0,Object(o["c"])({id:e}).then((function(e){var t=e.group,n=e.name,r=e.path,s=e.type,i=e.requestParam,o=e.responseParam,c=e.responseExample,l=a.$refs,u=l.base_data_form,p=l.request_param,m=l.response_param,d=l.response_example,f=i.header,h=i.body,b=i.query,g=i.rest;u.handleChangeBaseDataForm({group:t,name:n,path:r,type:s}),p.handleChangeHeaderData(f),p.handleChangeBodyData(h),p.handleChangeQueryData(b),p.handleChangeRestData(g),d.handleChangeContent(c),m.handleChangeData(o.data),m.handleChangeCurrentJsonType(o.type),a.loading=!1}))}}},k=F,q=(t("7c68"),Object(h["a"])(k,n,r,!1,null,"8053a668",null));a["default"]=q.exports}}]);
//# sourceMappingURL=chunk-6c5af12e.ddc5d0ec.js.map