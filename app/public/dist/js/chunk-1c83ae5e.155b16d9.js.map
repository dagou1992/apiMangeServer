{"version":3,"sources":["webpack:///./src/components/Env/index.vue?aa4b","webpack:///./src/views/Common/Env.vue?3fd5","webpack:///./src/components/Env/index.vue?f2fd","webpack:///./src/api/env.js","webpack:///src/components/Env/index.vue","webpack:///./src/components/Env/index.vue?5c36","webpack:///./src/components/Env/index.vue","webpack:///src/views/Common/Env.vue","webpack:///./src/views/Common/Env.vue?a0f1","webpack:///./src/views/Common/Env.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticRenderFns","staticStyle","_v","attrs","on","handleToCreate","staticClass","loading","tableList","operations","tableData","isEdit","dialogVisible","$event","formData","_l","item","key","label","model","value","callback","$$v","$set","expression","handleSubmitEnv","getEnvData","data","getJson","createEnvData","postJson","updateEnvData","putJson","deleteEnvData","id","deleteJson","name","formList","remark","host","components","mounted","initPage","mixins","mixin","methods","handleChangeDialogVisible","handleToEdit","handleToDeleteData","component"],"mappings":"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","file":"js/chunk-1c83ae5e.155b16d9.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=e7bc9346&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=e7bc9346&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('env-components')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"height\":\"100%\"}},[_c('el-card',{staticStyle:{\"padding-bottom\":\"15px\",\"margin-bottom\":\"20px\"}},[_c('h3',[_vm._v(\"环境配置\")]),_c('p',[_vm._v(\"项目环境可以帮助您快速切换测试的 API 地址前缀、全局变量等信息\")]),_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"small\"},on:{\"click\":_vm.handleToCreate}},[_c('i',{staticClass:\"el-icon-plus\"}),_vm._v(\" 新建环境 \")])],1),_c('base-table',{attrs:{\"loading\":_vm.loading,\"table-list\":_vm.tableList,\"operations\":_vm.operations,\"table-data\":_vm.tableData}}),_c('el-dialog',{attrs:{\"title\":_vm.isEdit ? '编辑环境' : '新建环境',\"visible\":_vm.dialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.formData,\"label-width\":\"80px\"}},[_vm._l((_vm.formList),function(item){return _c('el-form-item',{key:item.label,attrs:{\"label\":item.label}},[_c('el-input',{model:{value:(_vm.formData[item.value]),callback:function ($$v) {_vm.$set(_vm.formData, item.value, $$v)},expression:\"formData[item.value]\"}})],1)}),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSubmitEnv}},[_vm._v(\" 提交 \")]),_c('el-button',[_vm._v(\"取消\")])],1)],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { getJson, postJson, deleteJson, putJson } from '../util/axios';\n\nexport const getEnvData = data => getJson('/api/envPage', data);\n\nexport const createEnvData = data => postJson('/api/envPage', data);\n\nexport const updateEnvData = data => putJson('/api/envPage', data);\n\nexport const deleteEnvData = id => deleteJson(`/api/envPage/${id}`);\n","<template>\n  <div style=\"height: 100%;\">\n    <el-card style=\"padding-bottom: 15px; margin-bottom: 20px;\">\n      <h3>环境配置</h3>\n      <p>项目环境可以帮助您快速切换测试的 API 地址前缀、全局变量等信息</p>\n      <el-button type=\"success\" size=\"small\" @click=\"handleToCreate\">\n        <i class=\"el-icon-plus\"></i> 新建环境\n      </el-button>\n    </el-card>\n    <base-table\n      :loading=\"loading\"\n      :table-list=\"tableList\"\n      :operations=\"operations\"\n      :table-data=\"tableData\"\n    ></base-table>\n    <el-dialog\n      :title=\"isEdit ? '编辑环境' : '新建环境'\"\n      :visible.sync=\"dialogVisible\"\n      width=\"30%\"\n    >\n      <el-form :model=\"formData\" label-width=\"80px\">\n        <el-form-item\n          v-for=\"item in formList\"\n          :label=\"item.label\"\n          :key=\"item.label\"\n        >\n          <el-input v-model=\"formData[item.value]\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"handleSubmitEnv\">\n            提交\n          </el-button>\n          <el-button>取消</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {\n  getEnvData,\n  createEnvData,\n  updateEnvData,\n  deleteEnvData,\n} from '../../api/env';\n\nimport mixin from '../mixin';\nimport BaseTable from '../common/BaseTable';\nexport default {\n  name: 'index',\n  data() {\n    return {\n      tableData: [],\n      tableList: [\n        { label: 'ID：', value: 'id', width: 100 },\n        { label: '名称：', value: 'name' },\n        { label: '备注：', value: 'remark', width: 240 },\n        { label: '前置URL：', value: 'host' },\n      ],\n      operations: [\n        { label: '编辑', onClick: row => this.handleToEdit(row) },\n        {\n          label: '删除',\n          onClick: ({ id }) =>\n            this.$store.dispatch('globalDialog/toggleDialogVisible', {\n              message: `<span style=\"color: red;\">确定要删除吗？</span>`,\n              visible: true,\n              onSubmit: () => this.handleToDeleteData(id),\n            }),\n        },\n      ],\n      formList: [\n        { label: '环境名称', value: 'name' },\n        { label: '环境备注', value: 'remark' },\n        { label: 'Host', value: 'host' },\n      ],\n      formData: {\n        name: '',\n        remark: '',\n        host: '',\n      },\n      dialogVisible: false,\n      loading: false,\n      isEdit: false,\n    };\n  },\n  components: { BaseTable },\n  mounted() {\n    this.initPage();\n  },\n  mixins: [mixin],\n  methods: {\n    handleChangeDialogVisible(value) {\n      this.dialogVisible = value;\n    },\n    async handleSubmitEnv() {\n      const value = this.formData;\n      if (\n        Object.values(value).some(\n          item => typeof item === 'string' && item.trim() === '',\n        )\n      ) {\n        this.messageWarning('信息填写不完整');\n        return;\n      }\n      let result;\n      if (this.isEdit) {\n        result = await updateEnvData(value);\n      } else {\n        result = await createEnvData(value);\n      }\n      if (result) {\n        this.handleChangeDialogVisible(false);\n        this.initPage();\n      }\n    },\n    handleToCreate() {\n      this.isEdit = false;\n      this.formData = { name: '', remark: '', host: '' };\n      this.handleChangeDialogVisible(true);\n    },\n    handleToEdit({ id, name, remark, host }) {\n      this.handleChangeDialogVisible(true);\n      this.isEdit = true;\n      this.formData = { id, name, remark, host };\n    },\n    handleToDeleteData(id) {\n      deleteEnvData(id).then(() => {\n        this.messageSuccess('删除成功');\n        this.closeGlobalDialog();\n        this.initPage();\n      });\n    },\n    initPage() {\n      this.loading = true;\n      getEnvData().then(res => {\n        this.tableData = res;\n        this.loading = false;\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.el-card {\n  height: 20%;\n  border: 0px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=e7bc9346&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=e7bc9346&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e7bc9346\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <env-components></env-components>\n</template>\n\n<script>\nimport EnvComponents from '../../components/Env';\nexport default {\n  name: 'Env',\n  components: { EnvComponents },\n};\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Env.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Env.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Env.vue?vue&type=template&id=f88cf7be&scoped=true&\"\nimport script from \"./Env.vue?vue&type=script&lang=js&\"\nexport * from \"./Env.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f88cf7be\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}